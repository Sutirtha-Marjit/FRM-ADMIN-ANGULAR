
<div class="roundSquare appear" style="padding:20px; background:white; margin-bottom:20px;">
  
  <div  *ngIf="finalized" class="row" style="animation:appearSide 1s ease-out;">
    <i  class="icon icon-l1 icon-tick" style="margin-left: 12px;"></i>
    <h5  class="text-success" style="margin-left: 15px; margin-top: 3px;">Successfully updated</h5>
  </div>

  <div *ngIf="!finalized" class="row">
    <div class="col-md-4">
      <div class="thumbnail-box roundSquare" *ngIf="'IMAGE'===info.mediaTYpe">
        <div class="img-container">
          <img [src]="bgImage"/>
        </div>
        <ng-container [ngTemplateOutlet]="progressbar"></ng-container>
        <ng-container [ngTemplateOutlet]="errorBox"></ng-container>
        <ng-container [ngTemplateOutlet]="success"></ng-container>
      </div>
      <div class="video-thumbnail-box" *ngIf="'VIDEO'===info.mediaTYpe">
        <video  src="{{localVideoPath}}"></video>
        <ng-container [ngTemplateOutlet]="progressbar"></ng-container>
        <ng-container [ngTemplateOutlet]="errorBox"></ng-container>
        <ng-container [ngTemplateOutlet]="success"></ng-container>
        
      </div>
    </div>
    <div class="col-md-8">
      <form>
        <div class="form-group">
          <label for="titleInput">Title &nbsp;&nbsp;&nbsp;<small class="text-secondary" style="opacity:0.2;">{{info.id}}</small></label>
          <input type="text" [(ngModel)]="info.title" class="form-control form-control-sm" id="titleInput" name="titleInput" placeholder="Enter title">
        </div>
        <div class="form-group">
          <label for="titleInput">Description</label>
          <textarea  [(ngModel)]="info.description" class="form-control form-control-sm" id="titleInput" name="descInput" placeholder="Enter title">    </textarea>                
        </div>
        <div class="form-group">
          <label for="tagsInput">Title &nbsp;&nbsp;&nbsp;<small class="text-secondary" style="opacity:0.2;">{{info.tags}}</small></label>
          <input type="text" [(ngModel)]="info.tags" class="form-control form-control-sm" id="tagsInput" name="tagsInput" placeholder="Enter tags">                    
        </div>
        </form>
        <br/>
        <div class="align-right">
          <button (click)="publishContent()" *ngIf="info.contentURL.length>0 && info.title.length>0" class="btn btn-success roundBtn">Save & Publish</button>
          <small class="text-success" *ngIf="info.contentURL.length===0">Upload in progress! <span _ngcontent-c7="" class="preloader preloader-light"></span></small>
        </div>    
    </div>
  </div>
  
</div>
  


<ng-template #progressbar>
  <div class="upload-progress align-center" *ngIf="info.inProgress">
    <div class="row">
      <small class="col-md-6 text-light align-left">{{info.file.name}}</small>
      <small class="col-md-6 text-light align-right">{{getExactFileSize(info.file.size)}}</small>
    </div>
    <span ><i class="preloader preloader-light"></i></span>
  </div>
</ng-template>

<ng-template #errorBox>
    <div class="upload-progress align-center" *ngIf="!info.inProgress && uploadError.error">
        <app-failure-box [errorObj]="uploadError.errorDetails" [ctaText]="'Try again!'" (action)="uploadAction()"></app-failure-box>
    </div>
</ng-template>

<ng-template #success>
  <div class="align-center roundSquare " style="margin:5%; padding:5%; position:absolute; top:0px; left:0px; width:90%; background:rgba(40,167,69,0.7)" *ngIf="!uploadError.error && !info.inProgress ">
      <i class="icon icon-tick-white icon-l4"></i>      
  </div>
</ng-template>